<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Detail Placement - Sistem Monitoring</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    :root {
      --navy: #0b2340;
      --cream: #f4f7f6; /* Sedikit lebih abu-abu muda agar putih card kontras */
      --white: #ffffff;
      --accent: #b78b4a;
      --muted: #8898aa;
      --text-dark: #32325d;
      --border-color: #e9ecef;
      --shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);
    }

    body {
      background: var(--cream);
      color: var(--text-dark);
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      font-size: 0.95rem;
    }

    .container-main {
      max-width: 1000px;
      margin: 2.5rem auto;
      padding: 0 1rem;
    }

    /* --- HEADER --- */
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .page-title {
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--navy);
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    .page-title svg { stroke: var(--accent); width: 32px; height: 32px; }

    .placement-id {
      font-size: 0.85rem;
      color: var(--muted);
      font-weight: 500;
      background: #e9ecef;
      padding: 2px 8px;
      border-radius: 4px;
      margin-left: 0.5rem;
      vertical-align: middle;
    }

    /* --- CARDS & LAYOUT --- */
    .card-custom {
      background: var(--white);
      border: none;
      border-radius: 0.75rem; /* Sudut lebih bulat */
      box-shadow: var(--shadow);
      padding: 2rem;
      margin-bottom: 1.5rem;
      position: relative;
      overflow: hidden;
    }

    /* Garis aksen di atas card */
    .card-custom::before {
      content: '';
      position: absolute;
      top: 0; left: 0; width: 100%; height: 4px;
      background: linear-gradient(90deg, var(--navy) 0%, var(--accent) 100%);
    }

    .section-title {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--accent);
      font-weight: 700;
      margin-bottom: 1.25rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.75rem;
    }

    .grid-info {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem 2rem;
    }

    /* --- FIELDS --- */
    .info-group {
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
    }

    .info-label {
      color: var(--muted);
      font-size: 0.78rem;
      font-weight: 600;
      text-transform: uppercase;
    }

    .info-value {
      color: var(--navy);
      font-weight: 500;
      font-size: 1rem;
      padding: 0.4rem 0; /* Memberi ruang nafas */
      border-bottom: 1px dashed var(--border-color); /* Garis bantu tipis */
    }
    
    /* Hapus border untuk elemen terakhir di kolom */
    .info-group:last-child .info-value { border-bottom: none; }

    /* --- STATUS STYLING (Dipertahankan Icon/Warnanya) --- */
    .value-pill {
      display: inline-flex;
      align-items: center;
      padding: 0.5rem 1rem;
      border-radius: 50px;
      font-weight: 700;
      font-size: 0.9rem;
      letter-spacing: 0.02em;
    }

    /* Menggunakan variabel warna status yang diminta user */
    .status-PENDING { background: rgba(183,139,74,0.1); color: #b78b4a; border: 1px solid rgba(183,139,74,0.2); }
    .status-ACTIVE { background: rgba(31,122,53,0.1); color: #1f7a35; border: 1px solid rgba(31,122,53,0.2); }
    .status-COMPLETED { background: rgba(11,91,154,0.1); color: #4b86c6; border: 1px solid rgba(11,91,154,0.2); }
    .status-CANCELLED { background: rgba(196,77,58,0.1); color: #c44d3a; border: 1px solid rgba(196,77,58,0.2); }

    /* --- BUTTONS --- */
    .actions { display: flex; gap: 0.75rem; }

    .btn-custom {
      padding: 0.6rem 1.2rem;
      border-radius: 6px;
      font-weight: 600;
      font-size: 0.9rem;
      text-decoration: none;
      transition: all 0.2s;
      display: inline-flex; align-items: center; gap: 0.4rem;
    }

    .btn-outline {
      background: white;
      color: var(--navy);
      border: 1px solid #dcdfe6;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }
    .btn-outline:hover { background: #f8f9fa; transform: translateY(-1px); }

    .btn-primary-custom {
      background: var(--navy);
      color: white;
      border: 1px solid var(--navy);
      box-shadow: 0 2px 5px rgba(11, 35, 64, 0.2);
    }
    .btn-primary-custom:hover { 
      background: #163a63; 
      transform: translateY(-1px); 
      color: white;
    }

    @media (max-width: 768px) {
      .grid-info { grid-template-columns: 1fr; gap: 1rem; }
      .container-main { margin-top: 1.5rem; }
    }
  </style>
</head>

<body>
  <div th:replace="~{layouts/fragments/navbar :: topbar}"></div>
  <div th:replace="~{layouts/fragments/sidebar :: sidebar}"></div>

  <div class="container-main">
    
    <div class="page-header" style="position: relative; z-index: 10; margin-top: 1rem;">
      <div class="page-title">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" style="stroke: #b78b4a; min-width: 32px;">
           <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
        </svg>
        
        <span style="color: #0b2340; font-weight: 800; display: inline-block;">Detail Penempatan</span>
        
        <!-- <span class="placement-id" th:if="${placement != null}" th:text="'#' + ${placement.placementId}">#123</span> -->
      </div>

      <div class="actions" th:if="${#authorization.expression('hasAnyAuthority(''ADMINISTRATOR'', ''Administrator'')')}">
        <a th:href="@{/placements}" class="btn-custom btn-outline">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"/></svg>
          Kembali
        </a>
        <a th:if="${placement != null}" th:href="@{/placements/edit/{id}(id=${placement.placementId})}" class="btn-custom btn-primary-custom">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/></svg>
          Ubah Data
        </a>
      </div>
    </div>

    <div class="row">
      
      <div class="col-lg-8">
        <div class="card-custom">
          <div class="section-title">Informasi Siswa & Perusahaan</div>
          
          <div class="grid-info">
            <div class="d-flex flex-column gap-3">
              <div class="info-group">
                <div class="info-label">Nama Siswa</div>
                <div class="info-value" th:text="${placement?.student?.user?.username ?: '-'}">Nama Siswa</div>
              </div>
              <div class="info-group">
                <div class="info-label">NIS / NIM</div>
                <div class="info-value" th:text="${placement?.student?.studentNumber ?: '-'}">-</div>
              </div>
              <div class="info-group">
                <div class="info-label">Kontak Siswa</div>
                <div class="info-value" th:text="${placement?.student?.phoneNumber ?: '-'}">-</div>
              </div>
            </div>

            <div class="d-flex flex-column gap-3">
               <div class="info-group">
                <div class="info-label">Perusahaan</div>
                <div class="info-value text-primary" th:text="${placement?.company?.companyName ?: '-'}" style="font-weight:700;">PT Contoh</div>
              </div>
              <div class="info-group">
                <div class="info-label">Alamat</div>
                <div class="info-value" th:text="${placement?.company?.companyAddress ?: '-'}">-</div>
              </div>
               <div class="info-group">
                <div class="info-label">Lokasi Penempatan</div>
                <div class="info-value" th:text="${placement?.location?.name() ?: '-'}">-</div>
              </div>
            </div>
          </div>
        </div>

        <div class="card-custom">
          <div class="section-title">Detail Pembimbing</div>
          <div class="grid-info">
             <div class="d-flex flex-column gap-3">
                <div class="info-group">
                  <div class="info-label">Pembimbing Perusahaan</div>
                  <div class="info-value" th:if="${placement?.companySupervisor != null}" 
                       th:text="${placement.companySupervisor.user?.username ?: '-'}">-</div>
                  <div class="info-value" th:if="${placement?.companySupervisor == null}">-</div>
                </div>
                <div class="info-group">
                  <div class="info-label">Kontak (HP)</div>
                  <div class="info-value" th:text="${placement?.companySupervisor?.companySupervisorPhone ?: '-'}">-</div>
                </div>
             </div>

             <div class="d-flex flex-column gap-3">
                <div class="info-group">
                  <div class="info-label">Pembimbing Sekolah</div>
                  <div class="info-value" th:text="${placement?.schoolSupervisor?.user?.username ?: '-'}">-</div>
                </div>
                <div class="info-group">
                  <div class="info-label">Kontak (HP)</div>
                  <div class="info-value" th:text="${placement?.schoolSupervisor?.schoolSupervisorPhone ?: '-'}">-</div>
                </div>
             </div>
          </div>
        </div>
      </div>

      <div class="col-lg-4">
        <div class="card-custom">
          <div class="section-title">Status & Periode</div>
          
          <div class="d-flex flex-column gap-4">
            
            <div class="info-group">
              <div class="info-label mb-2">Status Saat Ini</div>
              <div th:if="${placement != null and placement.status != null}">
                <span th:classappend="'status-' + ${placement.status.name()}" class="value-pill">
                  <span th:text="${placement.status.name()}">ACTIVE</span>
                </span>
              </div>
              <div th:unless="${placement != null and placement.status != null}">
                 <span class="value-pill status-PENDING">PENDING</span>
              </div>
            </div>

            <div class="info-group">
              <div class="info-label">Periode Magang</div>
              <div class="info-value border-0 p-0 mt-1">
                 <div class="d-flex align-items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" stroke="var(--accent)" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" /></svg>
                    <span th:if="${placement?.startDate != null}" th:text="${#temporals.format(placement.startDate,'dd MMM yyyy')}">01 Jan</span>
                 </div>
                 <div class="d-flex align-items-center gap-2 mt-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" stroke="var(--muted)" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3 3v1.5M3 21h18M3 10h18M3 16h18" /></svg>
                    <span style="font-size:0.9rem; color:var(--muted);">s/d</span>
                    <span th:if="${placement?.endDate != null}" th:text="${#temporals.format(placement.endDate,'dd MMM yyyy')}">30 Mar</span>
                 </div>
              </div>
            </div>

            <div class="info-group">
               <div class="info-label">Catatan Perusahaan</div>
               <div class="p-3 bg-light rounded mt-1" style="font-size:0.9rem; color:var(--navy); min-height:80px;">
                  <span th:text="${placement?.company?.description ?: 'Tidak ada catatan.'}">-</span>
               </div>
            </div>

          </div>
        </div>
      </div>
      
    </div>

  </div>

  <footer style="text-align:center;color:var(--muted);padding:1rem;margin-top:0.5rem; font-size:0.85rem;">
    &copy; <span th:text="${#dates.format(#dates.createNow(),'yyyy')}">2025</span> Sistem Monitoring.
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>