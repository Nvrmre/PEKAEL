<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Detail Profil - Sistem Monitoring</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root {
      --navy: #0b2340;
      --cream: #f2ece3;
      --muted: #6c757d;
      --accent: #b78b4a;
    }

    body {
      background-color: var(--cream);
      color: var(--navy);
      font-family: 'Segoe UI', system-ui, sans-serif;
    }

    .container-main {
      max-width: 900px;
      margin: 2rem auto;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(11, 35, 64, 0.08);
      padding: 2.5rem;
    }

    .profile-header {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      margin-bottom: 2rem;
      border-bottom: 2px solid #f0f0f0;
      padding-bottom: 1.5rem;
    }

    .avatar-circle {
      width: 80px;
      height: 80px;
      background-color: var(--navy);
      color: var(--accent);
      font-size: 2rem;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      border: 3px solid var(--accent);
    }

    .profile-info h2 {
      margin: 0;
      font-weight: 700;
      color: var(--navy);
    }

    .profile-role {
      font-size: 0.95rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
      margin-top: 0.3rem;
    }

    .section-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--navy);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .section-title svg {
      stroke: var(--accent);
    }

    .data-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .info-card {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 1.2rem;
      border: 1px solid #eee;
    }

    .field-group {
      margin-bottom: 1rem;
    }

    .field-group:last-child {
      margin-bottom: 0;
    }

    .field-label {
      font-size: 0.85rem;
      color: var(--muted);
      font-weight: 600;
      text-transform: uppercase;
      margin-bottom: 0.2rem;
    }

    .field-value {
      font-size: 1.05rem;
      font-weight: 500;
      color: var(--navy);
    }

    .btn-back {
      background: var(--accent);
      color: white;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      transition: 0.3s;
    }

    .btn-back:hover {
      background: #946c35;
      color: white;
      transform: translateY(-2px);
    }
  </style>
</head>

<body>
  <div th:replace="~{layouts/fragments/navbar :: topbar}"></div>
  <div th:replace="~{layouts/fragments/sidebar :: sidebar}"></div>

  <main class="container-main">
    
    <div class="profile-header">
      <div class="avatar-circle">
        <span th:text="${#strings.substring(user.username,0,1).toUpperCase()}">U</span>
      </div>
      <div class="profile-info">
        <h2 th:text="${user.username}">Nama User</h2>
        <div class="profile-role" th:text="${user.role}">ROLE PENGGUNA</div>
      </div>
    </div>

    <div class="data-grid">
      
      <div class="info-card">
        <div class="section-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
          Informasi Akun
        </div>
        
        <div class="field-group">
          <div class="field-label">Username</div>
          <div class="field-value" th:text="${user.username}">-</div>
        </div>
        <div class="field-group">
          <div class="field-label">Email</div>
          <div class="field-value" th:text="${user.email}">-</div>
        </div>
        <div class="field-group">
          <div class="field-label">Status Akun</div>
          <div class="field-value text-success">
            <span class="badge bg-success">Aktif</span>
          </div>
        </div>
      </div>

      <div class="info-card" th:switch="${#strings.toString(user.role)}">

        <div th:case="'Student'">
          <div class="section-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
            </svg>
            Data Siswa
          </div>
          <div th:if="${user.student != null}">
            <div class="field-group">
                <div class="field-label">Nama Lengkap</div>
                <div class="field-value" th:text="${user.username}">-</div>
            </div>
            <div class="field-group">
                <div class="field-label">NISN / Nomor Induk</div>
                <div class="field-value" th:text="${user.student.studentNumber}">-</div>
            </div>
            <div class="field-group">
                <div class="field-label">Kelas & Jurusan</div>
                <div class="field-value">
                    <span th:text="${user.student.studentClass}">-</span> 
                    (<span th:text="${user.student.studentMajor}">-</span>)
                </div>
            </div>
            <div class="field-group">
                <div class="field-label">Alamat</div>
                <div class="field-value" th:text="${user.student.studentAddress}">-</div>
            </div>
            <div class="field-group">
                <div class="field-label">No. Telepon</div>
                <div class="field-value" th:text="${user.student.phoneNumber}">-</div>
            </div>
          </div>
          <div th:unless="${user.student != null}" class="text-muted fst-italic">Data siswa belum dilengkapi.</div>
        </div>

        <div th:case="'School_Supervisor'">
          <div class="section-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
            </svg>
            Data Guru Pembimbing
          </div>
          <div th:if="${user.schoolSupervisor != null}">
            <div class="field-group">
                <div class="field-label">Nama Lengkap</div>
                <div class="field-value" th:text="${user.username}">-</div>
            </div>
            <div class="field-group">
                <div class="field-label">NIP / ID Pegawai</div>
                <div class="field-value" th:text="${user.schoolSupervisor.employeeIdNumber}">-</div>
            </div>
            <div class="field-group">
                <div class="field-label">Jabatan</div>
                <div class="field-value" th:text="${user.schoolSupervisor.schoolSupervisorPosition}">-</div>
            </div>
            <div class="field-group">
                <div class="field-label">Mata Pelajaran</div>
                <div class="field-value" th:text="${user.schoolSupervisor.schoolSupervisorSubject}">-</div>
            </div>
            <div class="field-group">
                <div class="field-label">Sekolah</div>
                <div class="field-value" th:text="${user.schoolSupervisor.schoolName}">-</div>
            </div>
          </div>
          <div th:unless="${user.schoolSupervisor != null}" class="text-muted fst-italic">Data guru belum dilengkapi.</div>
        </div>

        <div th:case="'Company_Supervisor'">
          <div class="section-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
            Data Pembimbing Lapangan
          </div>
          <div th:if="${user.companySupervisor != null}">
            <div class="field-group">
                <div class="field-label">Nama Lengkap</div>
                <div class="field-value" th:text="${user.username}">-</div>
            </div>
            <div class="field-group">
                <div class="field-label">Jabatan</div>
                <div class="field-value" th:text="${user.companySupervisor.jobTitle}">-</div>
            </div>
            <div class="field-group">
                <div class="field-label">Perusahaan</div>
                <div class="field-value">
                    <span th:text="${user.companySupervisor.company?.companyName ?: 'Belum ada perusahaan'}">-</span>
                </div>
            </div>
            <div class="field-group">
                <div class="field-label">No. Telepon</div>
                <div class="field-value" th:text="${user.companySupervisor.companySupervisorPhone}">-</div>
            </div>
          </div>
          <div th:unless="${user.companySupervisor != null}" class="text-muted fst-italic">Data pembimbing belum dilengkapi.</div>
        </div>

        <div th:case="'Administrator'">
          <div class="section-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
            </svg>
            Data Administrator
          </div>
          <div class="field-group">
              <div class="field-label">Nama Admin</div>
              <div class="field-value" th:text="${user.adminFullName ?: user.username}">-</div>
          </div>
          <div class="field-group">
              <div class="field-label">Departemen</div>
              <div class="field-value" th:text="${user.adminDepartment ?: '-'}">-</div>
          </div>
          <div class="field-group">
              <div class="field-label">Kontak</div>
              <div class="field-value" th:text="${user.adminPhone ?: '-'}">-</div>
          </div>
        </div>

      </div>
    </div>

    <div class="mt-4">
      <a th:href="@{/users}" class="btn-back">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Kembali ke Daftar User
      </a>
    </div>

  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>